<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#ff8c00"><title>A blog by G.C. Marty</title><meta name="description" content="A blog about JavaScript, HTML, the web platform, NLP and to how optimise them all!"><base href="http://gu.illau.me/" target="_top"><link href="/css/main.css" rel="stylesheet"><script src="/js/analytics.js" defer async></script><script src="/js/ui.js" defer async></script><link href="/manifest.webmanifest" rel="manifest"><link href="http://feeds.feedburner.com/just-a-blog" rel="alternate" type="application/rss+xml" title="A blog by G.C. Marty"><link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"></head><body><nav><h1 class="name"><a href="/">A blog<small> by G.C. Marty</small></a></h1><div style="display:none" class="menu icon-menu"></div><ul class="nav-links"><li class="text-link"><a href="/about.html">about</a></li><li class="text-link"><a href="/apps.html">apps</a></li><li class="text-link"><a href="/talks.html">talks</a></li><li class="text-link"><a href="/posts.html">posts</a></li></ul><div class="social-media"><a href="https://github.com/gmarty" class="icon-github"></a><a href="https://twitter.com/g_marty" class="icon-twitter"></a></div></nav><div class="content"><div class="post-head group"><a href="/posts/the-physical-web/"><h1 class="post-title">The Physical Web</h1></a><span class="post-date">2015/03/11</span><span class="post-reading-time"></span></div><div class="post-body markdown"><p>&quot;Walk up and use anything&quot; is the promise of the <a href="http://google.github.io/physical-web/">Physical Web</a>.
It is an open source project started by Google that allows you to access to online resource via physical objects.</p>
<h2><a name="the-concept" class="anchor" href="#the-concept"><span class="header-link"></span></a>The concept</h2>
<p>The physical web is based on hardware beacons that broadcast data using Bluetooth Low Energy (BLE) without the need to pair the device. In this case, the data is an URL. For now, it requires you to install an app on your mobile device. This app will scan in the background the surroundings for beacons and will inform you whenever you come across one. You&#39;ll then be presented with a list of URL, one per beacon. If the project is successful, this feature may be built-in your mobile OS in the future, thus removing the need for an external app.</p>
<p>There are already some beacons available. I bought a <a href="https://www.blesh.com/product/blesh-pack-3-beacons/">physical web pack from Blesh</a>, but there are more <a href="http://store.twocanoes.com/collections/physical-web-beacons">providers</a>. You can also turn your laptop or other devices into beacons using the <a href="https://github.com/google/uribeacon/blob/master/beacons/README.md">projects listed here</a>. There&#39;s even an implementation for Node.js.</p>
<p><img src="https://lh3.googleusercontent.com/THMrcnE8cMC3H8ymn_HVIp1uyGZ7I58PcEiJfndWy9Ci=s600" alt="The Physical Web beacons by Blesh" title="The Physical Web beacons by Blesh"></p>
<p>These projects allow you do to both reading and advertising. The app required to read physical web beacons is available on Android and iOS.</p>
<h2><a name="mdns-support" class="anchor" href="#mdns-support"><span class="header-link"></span></a>mDNS support</h2>
<p>Advertising URL on a local network is also supported thanks to <a href="https://github.com/google/physical-web/blob/master/documentation/mDNS_Support.md">mDNS</a>. It works essentially by using a <code>_http._tcp</code> service with an optional TXT record for the path.
As noted on the website, the advantage over BLE is that reading is limited to the devices connected to the local network and won&#39;t leak to unauthorised people. It also enables broadcasting longer URLs.</p>
<h2><a name="criticism" class="anchor" href="#criticism"><span class="header-link"></span></a>Criticism</h2>
<p>This project is really interesting because it helps discovering content useful locally using the P2P web.
Unfortunately I wish the concept had been taken further and instead of advertising URL that requires an Internet connection to be visited, it could have advertised content stored locally, on a embedded server. You can always advertise URL from a local network using mDNS, but how to make sure the visitors are connected to the correct local network if you use BLE?
I understand it is probably in Google&#39;s own interest to promote Internet and force users to remain connected at all time. They&#39;re not making money on local content completely disconnected from the Internet.</p>
<p>Also it looks like the main use case is to advertise products and services. I strongly think the web and the Internet of things shouldn&#39;t be about consumption and profit only. The P2P Web should reinforce local communities and make people to help each other. It should enable you to connect with local people (It sounds cheesy, I know...).
Anyway, the web being what you make of it, I still think the physical web is an interesting project.</p>
<h2><a name="next-step" class="anchor" href="#next-step"><span class="header-link"></span></a>Next step</h2>
<p>I&#39;ve started building an app to implement the <a href="https://github.com/gmarty/fxos-physical-web">Physical Web on Firefox OS</a>. It will allow you to read and act as a physical web beacons. At the moment BLE is not implemented on B2G, but it&#39;s coming to v3, later this year. So in the meantime, I&#39;m relaying on mDNS.</p>
<p>I&#39;ve set up one of the physical web beacons to advertise the URL of this blog. I&#39;m carrying this beacon with me most of the time. So if you come across it in the streets of London, you&#39;ll know I&#39;m not far away!</p>
</div><div class="comments"><a href="/posts/the-physical-web/#comments"><span class="icon-bubbles"></span>Comments</a></div><div class="post-head group"><a href="/posts/privacy-and-google-analytics/"><h1 class="post-title">Privacy and Google Analytics</h1></a><span class="post-date">2014/12/08</span><span class="post-reading-time"></span></div><div class="post-body markdown"><h2><a name="the-problem" class="anchor" href="#the-problem"><span class="header-link"></span></a>The problem</h2>
<p>After reading a post comparing analytics solutions, I realised most people ignore that Google Analytics can be fine tuned to comply with stricter privacy policies. In this post, I&#39;ll share the solutions I implemented to keep using Google Analytics without compromising my visitors (a.k.a. yourself) privacy.</p>
<p>Please note that the code only relates to the latest <code>analytics.js</code> API. Look for support pages for older versions of Google Analytics.</p>
<h2><a name="the-solutions" class="anchor" href="#the-solutions"><span class="header-link"></span></a>The solutions</h2>
<h3><a name="disable-data-sharing" class="anchor" href="#disable-data-sharing"><span class="header-link"></span></a>Disable data sharing</h3>
<p>By default, the data collected from Google Analytics are shared across several services like:</p>
<ul>
<li>Other Google products like AdWords</li>
<li>Industries aggregate trends that allow comparing your result with web sites in the same sector</li>
<li>Technical support...</li>
</ul>
<p>Though this data sharing should be harmless most of the time, you can disable it in your account settings. You can read more about it on the <a href="https://support.google.com/analytics/answer/1011397?hl=en">data sharing settings</a> support page.</p>
<h3><a name="anonymise-ip-address" class="anchor" href="#anonymise-ip-address"><span class="header-link"></span></a>Anonymise IP address</h3>
<p>Google Analytics has a built-in feature to anonymise IP address (see this <a href="https://support.google.com/analytics/answer/2763052?hl=en">help page</a> for details). When enabled, the last few digits of the visitor&#39;s IP address are set to 0 (IPv6 is supported).
In theory it is not possible for Google to map an anonymised IP address to a specific user. Also, according to their documentation, the complete IP address is never logged.</p>
<p>However, I read the relevant document carefully and noticed it&#39;s not very clear to me if Google logs the IP address when the <code>analytics.js</code> file is requested from their server. If you&#39;re a bit paranoid, you may decide not to trust Google here. In such case, you&#39;ll want to proxy it on your own domain and refresh it as often as possible. I haven&#39;t tried myself, but if you&#39;re doing that, let me know as I&#39;d love to read more.</p>
<p>Obviously, the down side of this setting is you get a less accurate geographic report as it is based on the IP address. But who needs a granularity to the level of a city?</p>
<h3><a name="implement-an-opt-out-mechanism" class="anchor" href="#implement-an-opt-out-mechanism"><span class="header-link"></span></a>Implement an opt-out mechanism</h3>
<p>You can easily give your users the ability to deactivate tracking. Just create a setting in your app that sets the following property to <code>true</code>:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="nb">window</span><span class="p">[</span><span class="s1">&#39;ga-disable-UA-XXXXXX-Y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// Replace UA-XXXXXX-Y by your Google Analytics ID</span>
</pre></div>
</code></pre>
<p>You can persist this setting in your user account, so that her preference is is kept whatever the device she&#39;s using to access your website. But for performance reason, I recommend not to load Google Analytics at all when your user has opted out.
You can read more about <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/advanced#optout">user opt-out</a> in the help pages.</p>
<h3><a name="dont-use-cookies" class="anchor" href="#dont-use-cookies"><span class="header-link"></span></a>Don&#39;t use cookies</h3>
<p>Though not directly related to privacy, not setting cookies is likely to increase your visitors confidence while removing the need to display a message related to the <a href="https://en.wikipedia.org/wiki/HTTP_cookie#EU_cookie_directive">EU cookie directive</a>.</p>
<p>Instead of cookies, use local storage for storing the visitor identifier used by Google Analytics, the so called <code>clientId</code> parameter. This technique has a beneficial aspect on performance as well. The browser won&#39;t send all the cookie detail with every request made to an asset located in the same domain as the page.</p>
<p>Here is the code used in this blog:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;UA-XXXXXX-Y&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="c1">// Use your own ID!</span>
  <span class="s1">&#39;storage&#39;</span><span class="o">:</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span>
  <span class="s1">&#39;clientId&#39;</span><span class="o">:</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;gaClientId&#39;</span><span class="p">)</span>
<span class="p">});</span>
<span class="nx">ga</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tracker</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;gaClientId&#39;</span><span class="p">,</span> <span class="nx">tracker</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;clientId&#39;</span><span class="p">));</span>
<span class="p">});</span>
<span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span><span class="s1">&#39;pageview&#39;</span><span class="p">)</span>
</pre></div>
</code></pre>
<h3><a name="comply-with-do-not-track" class="anchor" href="#comply-with-do-not-track"><span class="header-link"></span></a>Comply with Do Not Track</h3>
<p>The DNT is not only exposed to the client as a HTTP header but also as a property on the <code>navigator</code> object: <code>navigator.doNotTrack</code>. This returns:</p>
<ul>
<li><code>&#39;1&#39;</code> (the visitor does not want to be tracked)</li>
<li><code>&#39;0&#39;</code> (the visitor wants to be tracked)</li>
<li><code>null</code> or <code>&#39;unspecified&#39;</code> (the visitor tells nothing about her preference)</li>
</ul>
<p>You can wrap the code responsible for loading Google Analytics in a <code>if</code> statement like I do in this blog (examine the source for yourself if you don&#39;t believe me!):</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">doNotTrack</span> <span class="o">!==</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Load Google Analytics and track user.</span>
<span class="p">}</span>
</pre></div>
</code></pre>
<h3><a name="force-ssl" class="anchor" href="#force-ssl"><span class="header-link"></span></a>Force SSL</h3>
<p>This blog is hosted on Github pages. Unfortunately, https is not (yet?) supported. The least I could do was to force the <code>analytics.js</code> file and the beacon to be respectively received and sent encrypted.
More info about the <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#forceSSL"><code>forceSSL</code> setting</a> is available.</p>
<h2><a name="the-challenge" class="anchor" href="#the-challenge"><span class="header-link"></span></a>The challenge</h2>
<p>Some of the solutions presented here depend on your level of trust. I decided to trust Google even if I can never have the certitude that they really do what they say they do.
So after all, your trust level may be different and you can decide whether to apply the solutions mentioned above or turn to other analytics services, like <a href="http://piwik.org/">Piwik</a>.</p>
<p>Also, I would have loved to see Google making some of these options easier. For example, support of DNT could have been made an option in the account settings. Also, we can&#39;t create a custom IP masking function to push anonymisation even further.</p>
<p>Google Analytics offer some very basic privacy aware options, but they should offer more!</p>
</div><div class="comments"><a href="/posts/privacy-and-google-analytics/#comments"><span class="icon-bubbles"></span>Comments</a></div><div class="post-head group"><a href="/posts/experimenting-with-serverless-apps/"><h1 class="post-title">Experimenting with serverless apps</h1></a><span class="post-date">2014/10/09</span><span class="post-reading-time"></span></div><div class="post-body markdown"><p>Servers are inherent to the web. The recent <a href="https://unhosted.org/">unhosted</a> movement tends to reduce their importance to give the power back to the client applications.</p>
<p>But is a completely serverless web really achievable?</p>
<p>Let&#39;s stay very basic for now and let&#39;s not consider issues like security or version update.</p>
<p>(Note: the content of this post was inspired and developed during an <a href="http://lanyrd.com/2014/decentralizejs/">event</a> and a <a href="http://www.meetup.com/ORG-London/events/202557812/">hack day</a> I attended recently.)</p>
<h2><a name="a-dystopian-example" class="anchor" href="#a-dystopian-example"><span class="header-link"></span></a>A dystopian example</h2>
<p>Imagine you are demonstrating against the government in place in your country. They are powerful and control the communication. In order to slow and confuse you they cut all network. Without internet you can&#39;t communicate with your peers and can&#39;t organise the movement.</p>
<p>You want to be able to send and receive information. How can you do that when all you have is a web enabled device and no network?</p>
<h2><a name="distribute-serverless-apps" class="anchor" href="#distribute-serverless-apps"><span class="header-link"></span></a>Distribute serverless apps</h2>
<p>Let&#39;s see if it&#39;s possible to distribute apps from device to device, using web technologies only but without servers.</p>
<h3><a name="file-uri-scheme" class="anchor" href="#file-uri-scheme"><span class="header-link"></span></a>file:// URI scheme</h3>
<p>The most obvious and direct approach is to create a file on your computer and open it in your browser using the <code>file://</code> protocol.
It works for simple documents but comes with a huge list of limitations:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file:_URIs">Same-origin policy limitations</a></li>
<li>Can&#39;t open a <code>file://</code> URI from a <code>http://</code> web page</li>
<li>The reference to the document is local and can&#39;t be shared</li>
<li>Does it even work on mobile browsers?</li>
</ul>
<h3><a name="data-uri" class="anchor" href="#data-uri"><span class="header-link"></span></a>Data URI</h3>
<p>Data URIs allow to package all of your app logic and resources in a string format that your browser can recognise and execute.
Rather than using a URL as a reference to a content located somewhere, the URL contains everything. The address IS the content.</p>
<p>A very simple example is the following:
<a href="data:text/html;utf-8,%3Cb%3EHello%2C%20world!%3C%2Fb%3E">data:text/html;utf-8,&lt;b&gt;Hello, world!&lt;/b&gt;</a></p>
<p>Clicking on the link will display the text &quot;Hello, world!&quot; in bold. Everything is self-contained.</p>
<p>There is a limitation, however, in the number of characters such a URI can contain: no more than 65535. Here is the function I use to convert HTML code to data URI:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">dataUriEncode</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">encoded</span> <span class="o">=</span> <span class="s1">&#39;data:text/html;utf-8,&#39;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">encoded</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">65535</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;The string generated is too long.&#39;</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">encoded</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</code></pre>
<h2><a name="abusing-data-uris" class="anchor" href="#abusing-data-uris"><span class="header-link"></span></a>Abusing data Uris</h2>
<p>Let&#39;s now abuse this simple mechanism to create web pages and distribute them without server.</p>
<p>For the sake of an example, I shamelessly stole <a href="http://www.p01.org/releases/WOLF1K/">WOLF1K</a>, a clone of Wolfenstein in JavaScript that only weights 1K. Here is the complete source code of the app that I&#39;ll try to distribute:</p>
<pre><code><div class="highlight"><pre><span class="nx">data</span><span class="o">:</span><span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">;</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">WOLF1K</span><span class="o">&lt;</span><span class="err">/title&gt;&lt;canvas id=c&gt;&lt;/canvas&gt;&lt;script&gt;E=&quot;A=document.body.children.c;B=A.getContext(&#39;2d&#39;~=1$&amp;31$&amp;992(E&amp;19)?1;    n=@nB#[A#)onkeyup=0};D=[setInterval(@=innerWidth-30;A.heigh@/2;    n=@n=[t,n,S,8+$*S&amp;8)|(X+y+t*s+t*c8&amp;7]){w=X=x=;v=y=;z=2]z+n/@ a=s=yG=F,r=u;a=c=X    ;$~)F&lt;G?(F,F1/uS=c/u):(G,G1/rS=32*s/r)}    n=@i&lt;15;i++){2];j=38;i?1X=(+,;Y=(,+;ji?random(8-42]=(b-t/16+9.42%6.28)-3.14;z-atan2(Y-=v,X-=w~i&amp;&amp;&gt;.5?=[sqrt(X*X+Y*Y),@/2-@*b,i,0,++n]    D.sort(+x[-y[}~n)    a=[,a/@ F=@/2//[,c=8,u=v=+1=[3]=c=1,@,0%)&#39;):a!ca)    &#39;+v+&#39;%)&#39;atob(&#39;CBF+/p6f9AC9bsP/w/dqvdvb2NvD29sb&#39;),y=8,@/4,b!yb)d&gt;&gt;y&amp;1,v),9)]&quot;;&quot;@A.widthMath.cos(b)B[i][function(x,y){B.fillStyle=&#39;hsl(&#39;+D[n][2]+&#39;1,99%,%=1;u=a&lt;0?-a:a,F=(a&lt;0?d:1-d)/u;onkeydownMath.sin(b).charCodeAt(x++%73)    for(?B.fillRect(a,b,u:A[j]-A[j+2];D[n]A[x.which]=--;*t/8;x|=y&lt;&lt;5;,i=0;Math.+=0]1.1,return)*b=,d=:0}F/41]t= -.5,!-=F;#[n]=$(x~);,x&quot;.replace(/.([%-}]+)/g,function(x,y){E=E.split(x[0]).join(y)});eval(E)&lt;/script&gt;</span>
</pre></div>
</code></pre>
<p>I will now run this web page and distribute it to other devices without using a server.
The tests below are based on the following browser/OS configuration:</p>
<ul>
<li>Firefox OS</li>
<li>Firefox for Android</li>
<li>Chrome for Android</li>
<li>Firefox and Chrome desktop (on Ubuntu ; where it makes sense)</li>
</ul>
<p>Feel free to test and send me the results on other OS configurations.</p>
<h2><a name="distribution-strategies" class="anchor" href="#distribution-strategies"><span class="header-link"></span></a>Distribution strategies</h2>
<h3><a name="link" class="anchor" href="#link"><span class="header-link"></span></a>Link</h3>
<p>This is the easier way of sharing a data URI app and it works everywhere! Just click the link below to start the app:
<a href="data:text/html;utf-8,%3Ctitle%3EWOLF1K%3C%2Ftitle%3E%3Ccanvas%20id%3Dc%3E%3C%2Fcanvas%3E%3Cscript%3EE%3D%22A%3Ddocument.body.children.c%3BB%3DA.getContext('2d'~%06%3D%03%0F1%12%18%24%2631%19%24%26992%19(E%08%2619)%3F1%1C%3B%09n%3D%40%13n%10B%23%5B%17%17%17A%23%16)onkeyup%3D%03%0F0%7D%3BD%3D%5BsetInterval(%03%40%3DinnerWidth-30%3BA.heigh%1F%40%2F2%3B%09n%3D%40%13n%10%0E%3D%5Bt%2Cn%2CS%2C8%2B%24*S%268)%7C(X%2By%2Bt*s%2Bt*c%198%267%5D)%7Bw%3DX%3Dx%3D%02%16%3Bv%3Dy%3D%02%1E%3Bz%3D%022%5D%12%1Az%2Bn%2F%40%20a%3Ds%3D%07%1By%05G%3DF%2Cr%3Du%3Ba%3Dc%3D%01%1BX%05%09%3B%06%24~)F%3CG%3F(%1FF%2CF%151%2Fu%7F%15S%3Dc%2Fu)%3A(%1FG%2CG%151%2Fr%7F%15S%3D32*s%2Fr)%7D%09n%3D%40%13i%3C15%3Bi%2B%2B)%7B%1A%022%5D%3Bj%3D38%3B%1Fi%3F1%0CX%3D%02%16%15%06(%02%16%2B%01%11%2C%02%1E%19%01%11%3BY%3D%02%1E%15%06(%02%16%2C%02%1E%2B%07%11%19%07%11%3Bj%10%1Fi%3F%14random(%198-4%0C%022%5D%3D(b-t%2F16%2B9.42%256.28)-3.14%3B%1Az-%14atan2(Y-%3Dv%2CX-%3Dw~i%26%26%01%3E.5%3F%0E%3D%5B%14sqrt(X*X%2BY*Y)%2C%40%2F2-%40*b%2Ci%2C0%2C%2B%2Bn%5D%1C%09D.sort(%03%18%2Bx%5B%16-y%5B%16%7D~n%10)%09a%3D%0E%5B%1E%2C%1Aa%2F%40%20F%3D%40%2F2%2F%01%2F%0E%5B%1A%16%2Cc%3D8%2Cu%3Dv%3D%1D%2B1%7F%3D%0E%5B3%5D%7F%0B%3Dc%3D1%2C%40%2C%040%25)')%3Aa!c%10a%15%1D)%09%04'%2Bv%2B'%25)'%1Batob('CBF%2B%2Fp6f9AC9bsP%2Fw%2Fdqvdvb2NvD29sb')%08%2Cy%3D8%2C%1A%40%2F4%2Cb!y%10b%15%1D)d%3E%3Ey%261%0B%2Cv)%1C%2C9)%5D%22%3B%22%40A.width%01Math.cos(b)%02B%5Bi%5D%5B%03function(x%2Cy)%7B%04B.fillStyle%3D'hsl('%2BD%5Bn%5D%5B2%5D%2B'1%2C99%25%2C%05%25%3D1%3Bu%3Da%3C0%3F-a%3Aa%2CF%3D(a%3C0%3Fd%3A1-d)%2Fu%3B%06onkeydown%07Math.sin(b)%08.charCodeAt(x%2B%2B%2573)%09for(%0B%3FB.fillRect(a%2Cb%2Cu%0C%3AA%5Bj%5D-A%5Bj%2B2%5D%3B%0ED%5Bn%5D%0FA%5Bx.which%5D%3D%10--%3B%11*t%2F8%12%3Bx%7C%3Dy%3C%3C5%3B%13%2Ci%3D0%3B%14Math.%15%2B%3D%160%5D%171.1%2C%18return%19)*%1Ab%3D%1B%2Cd%3D%1C%3A0%7D%1DF%2F4%1E1%5D%1Ft%3D%20-.5%2C!-%3DF%3B%23%5Bn%5D%3D%24(x~)%3B%7F%2Cx%22.replace(%2F.(%5B%25-%7D%5D%2B)%2Fg%2Cfunction(x%2Cy)%7BE%3DE.split(x%5B0%5D).join(y)%7D)%3Beval(E)%3C%2Fscript%3E">WOLF1K</a></p>
<p>Obviously a link means that a web page is required and possibly a server to host it.</p>
<h3><a name="emails" class="anchor" href="#emails"><span class="header-link"></span></a>Emails</h3>
<p>I haven&#39;t been able to send or receive a data URI link from an email. This is due to security reasons.
What works though is to paste the source code of the app and ask the recipient to copy and paste it in her browser address bar.</p>
<h3><a name="sms" class="anchor" href="#sms"><span class="header-link"></span></a>SMS</h3>
<p>Likewise, copy/pasting content from a text message is the only way to use SMS to send such an app.</p>
<h3><a name="bluetooth-and-nfc" class="anchor" href="#bluetooth-and-nfc"><span class="header-link"></span></a>Bluetooth and NFC</h3>
<p>This methods were a major disappointment to me. I was really hoping that one can send a data URI app from a device to another. But it doesn&#39;t work due to &quot;Can&#39;t open media type&quot; (Bluetooth) and &quot;Unknown tag type&quot; (NFC) errors.
That said, I suspect it can be fixed on Firefox OS.</p>
<h3><a name="qr-code" class="anchor" href="#qr-code"><span class="header-link"></span></a>QR Code</h3>
<p>1084 characters are too much for QR Code and make it impossible to decode.</p>
<p>This is sad because this prevents us from using printed material to distribute apps.</p>
<p>If you don&#39;t believe me, try to scan that:
<img src="https://lh3.googleusercontent.com/b60QnpsZFq0_-xrxhrypM9Tj_rMjoSHWNZjshbtz3aq9=s0" alt="WOLF1K" title="WOLF1K.png"></p>
<h3><a name="wifi-direct" class="anchor" href="#wifi-direct"><span class="header-link"></span></a>Wifi Direct</h3>
<p>This is a protocol to discover and communicate with devices connected to the same Wifi network, even if there is no Internet connection.
Though it is currently implemented in Firefox OS and Android, this needs to be tested to see if it&#39;s possible to send data URI web app via this channel.</p>
<h2><a name="bookmarking-and-adding-to-homescreen" class="anchor" href="#bookmarking-and-adding-to-homescreen"><span class="header-link"></span></a>Bookmarking and adding to homescreen</h2>
<p>Once the app received is running on your browser, you want to bookmark it so that you can use it later.</p>
<p>Desktop browsers permit bookmarking data URI apps, but not to add to homescreen.</p>
<p>On mobile browsers, things are slightly more complex:</p>
<ul>
<li>Firefox for Android: bookmark and add to homescreen both work OK</li>
<li>Chrome for Android: can bookmark but app added to homescreen can&#39;t be opened (&quot;App isn&#39;t installed&quot; error message)</li>
<li>Firefox OS: bookmark is replaced by add to homescreen, but this feature doesn&#39;t work as of version 2.1 with data URI (Here again I believe this can be fixed)</li>
</ul>
<h2><a name="so-what-now" class="anchor" href="#so-what-now"><span class="header-link"></span></a>So what now?</h2>
<p>Ironically the only methods that work are the server based one (link, email, text messages). Distributing web documents encoded in data URI without a server is a bit tricky at the moment. OS UI don&#39;t always allow creating, sharing or opening such apps.
I understand this falls in a particular edge case, but if data URI apps were supported like URL based apps, things would be easier.</p>
<p>Now I&#39;d love to see a discussion happening around what does the web need to achieve this. Are they any specifications currently being standardised that would go in this direction?</p>
<p>Let&#39;s move things forward and get a truly serverless web!</p>
</div><div class="comments"><a href="/posts/experimenting-with-serverless-apps/#comments"><span class="icon-bubbles"></span>Comments</a></div><div class="pagination group"><a href="/" class="newer">Newer &#8594;</a><a href="/page/2/" class="older">&#8592; Older</a></div></div></body></html>